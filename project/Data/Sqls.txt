CREATE DATABASE IF NOT EXISTS `Inmobiliaria` CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
USE `Inmobiliaria`;

CREATE TABLE IF NOT EXISTS `Personas` (
  `IdPersona` INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  `Nombre` VARCHAR(255) NOT NULL,
  `Apellido` VARCHAR(100) NOT NULL,
  `Dni` INT NOT NULL,
  `Telefono` VARCHAR(50),
  `Direccion` VARCHAR(255),
  `Email` VARCHAR(200),
  `Logico` TINYINT(1) NOT NULL DEFAULT 1,
  UNIQUE KEY `UX_Persona_Dni` (`Dni`),
  UNIQUE KEY `UX_Persona_Email` (`Email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

CREATE TABLE IF NOT EXISTS `Propietarios` (
  `IdPropietario` INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  `IdPersona` INT NOT NULL,
  `LogicoProp` TINYINT(1) NOT NULL DEFAULT 1,
  CONSTRAINT `UX_Propietarios_IdPersona` UNIQUE (`IdPersona`), 
  CONSTRAINT `FK_Propietarios_Persona` FOREIGN KEY (`IdPersona`) REFERENCES `Personas`(`IdPersona`)
    ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;